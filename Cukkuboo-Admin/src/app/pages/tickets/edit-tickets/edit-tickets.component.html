<div class="content-container">
  <div class="header-row">
    <h2>{{ ticketId ? 'Edit Ticket' : 'Add Ticket' }}</h2>
    <button class="back-to-list-button" (click)="goBack()">Back to List</button>
  </div>

  <form [formGroup]="ticketForm">
    <mat-card appearance="outlined" class="form-card">
      <mat-card-content class="d-flex flex-wrap">

        <!-- Name -->
        <div class="w-50 px-2 pb-3">
          <label class="display-label">Name</label>
          <div class="display-value">{{ ticketForm.get('name')?.value }}</div>
        </div>

        <!-- Phone -->
        <div class="w-50 px-2 pb-3">
          <label class="display-label">Phone</label>
          <div class="display-value">
            {{ ticketForm.get('countryCode')?.value }} {{ ticketForm.get('phone')?.value }}
          </div>
        </div>

        <!-- Email -->
        <div class="w-50 px-2 pb-3">
          <label class="display-label">Email</label>
          <div class="display-value">{{ ticketForm.get('email')?.value }}</div>
        </div>

        <!-- Issue Type -->
        <div class="w-50 px-2 pb-3">
          <label class="display-label">Issue Type</label>
          <div class="display-value">{{ ticketForm.get('issue_type')?.value }}</div>
        </div>

        <!-- Description -->
        <div class="w-100 px-2 pb-3">
          <label class="display-label">Description</label>
          <div class="display-value">{{ ticketForm.get('description')?.value }}</div>
        </div>

        <!-- Screenshot -->
        <div class="w-50 px-2 pb-3">
          <label class="display-label">Screenshot</label>
          <div *ngIf="screenshotPreview; else noMedia">
            <img 
              [src]="screenshotPreview" 
              alt="Screenshot" 
              class="clickable-image"
              (click)="openImageModal()" 
            />
          </div>
          <ng-template #noMedia>
            <p class="no-media-text">No media</p>
          </ng-template>
        </div>

        <!-- Status -->
        <div class="w-50 px-2 pb-3">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Status</mat-label>
            <mat-select formControlName="status">
              <mat-option value="1">Pending</mat-option>
              <mat-option value="2">OnHold</mat-option>
              <mat-option value="3">Closed</mat-option>
              <mat-option value="9">Deleted</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Save -->
        <div class="save">
          <button mat-raised-button color="primary" class="save-button" (click)="saveTicket()">Save</button>
        </div>
      </mat-card-content>
    </mat-card>
  </form>

  <!-- Fullscreen Image Modal -->
  <div class="modal-overlay" *ngIf="showImageModal" (click)="closeImageModal()">
    <img [src]="screenshotPreview" alt="Full Screenshot" class="modal-image" />
  </div>
</div>
